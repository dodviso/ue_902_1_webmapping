(()=>{"use strict";var e={965:(e,t,s)=>{var a=s(751),n=s(641);const l={class:"app-container"};function r(e,t,s,a,r,o){const i=(0,n.g2)("MapView"),d=(0,n.g2)("LayerSelector"),p=(0,n.g2)("Legend"),u=(0,n.g2)("Info");return(0,n.uX)(),(0,n.CE)(n.FK,null,[t[1]||(t[1]=(0,n.Lk)("head",null,[(0,n.Lk)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap",rel:"stylesheet"})],-1)),(0,n.Lk)("div",l,[t[0]||(t[0]=(0,n.Lk)("h1",{class:"map-title"},"Essences d'arbres en Haute-Garonne",-1)),(0,n.bF)(i,{ref:"mapView"},null,512),(0,n.bF)(d,{onLayerChange:o.updateMapLayer},null,8,["onLayerChange"]),(0,n.bF)(p,{legendUrl:r.legendUrl},null,8,["legendUrl"]),(0,n.bF)(u)])],64)}const o={class:"map-container"},i={class:"basemap-selector"};function d(e,t,s,l,r,d){return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",i,[t[3]||(t[3]=(0,n.Lk)("h3",null,"Choisir le fond de carte",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedBasemap=e),onChange:t[1]||(t[1]=(...e)=>d.changeBasemap&&d.changeBasemap(...e))},t[2]||(t[2]=[(0,n.Lk)("option",{value:"osm"},"OpenStreetMap",-1),(0,n.Lk)("option",{value:"satellite"},"Satellite",-1),(0,n.Lk)("option",{value:"terrain"},"Terrain",-1)]),544),[[a.u1,r.selectedBasemap]])]),t[4]||(t[4]=(0,n.Lk)("div",{id:"map"},null,-1))])}var p=s(481),u=s.n(p);const c={data(){return{map:null,wmsLayer:null,highlightLayer:null,wmsUrl:"https://www.geotests.net/geoserver/ballot/wms",selectedLayer:"",selectedBasemap:"osm",basemaps:{osm:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",satellite:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",terrain:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png"}}},mounted(){(0,n.dY)((()=>{this.initMap()}))},methods:{initMap(){this.map=u().map("map").setView([43.6,1.42],10),this.addBasemap()},addBasemap(){const e=this.basemaps[this.selectedBasemap];u().tileLayer(e,{attribution:"&copy; OpenStreetMap contributors"}).addTo(this.map)},changeBasemap(){this.map.eachLayer((e=>{e instanceof u().TileLayer&&this.map.removeLayer(e)})),this.addBasemap()},updateLayer(e,t){this.selectedLayer=e,this.wmsLayer&&this.map.removeLayer(this.wmsLayer),this.wmsLayer=u().tileLayer.wms(this.wmsUrl,{layers:this.selectedLayer,styles:t,format:"image/png",transparent:!0,version:"1.1.1"}).addTo(this.map)}}};var m=s(262);const h=(0,m.A)(c,[["render",d],["__scopeId","data-v-6a2fac6d"]]),y=h;var g=s(33);const v={class:"menu"},f=["value"],L=["value"];function w(e,t,s,l,r,o){return(0,n.uX)(),(0,n.CE)("div",v,[t[4]||(t[4]=(0,n.Lk)("h3",null,"Choisir une couche",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedLayer=e),onChange:t[1]||(t[1]=(...e)=>o.updateStyles&&o.updateStyles(...e))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.layers,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.name,value:e.name},(0,g.v_)(e.title),9,f)))),128))],544),[[a.u1,r.selectedLayer]]),t[5]||(t[5]=(0,n.Lk)("h3",null,"Choisir un style",-1)),r.styles.length>0?(0,n.bo)(((0,n.uX)(),(0,n.CE)("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=e=>r.selectedStyle=e),onChange:t[3]||(t[3]=(...e)=>o.emitLayerChange&&o.emitLayerChange(...e))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.styles,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.name,value:e.name},(0,g.v_)(e.title),9,L)))),128))],544)),[[a.u1,r.selectedStyle]]):(0,n.Q3)("",!0)])}const b={data(){return{selectedLayer:"",selectedStyle:"",layers:[],styles:[],wmsUrl:"https://www.geotests.net/geoserver/ballot/wms"}},mounted(){this.fetchCapabilities()},methods:{fetchCapabilities(){fetch(`${this.wmsUrl}?service=WMS&request=GetCapabilities&version=1.1.1`).then((e=>e.text())).then((e=>{const t=new DOMParser,s=t.parseFromString(e,"text/xml"),a=s.getElementsByTagName("Layer");let n=[];for(let l=1;l<a.length;l++){let e=a[l].getElementsByTagName("Name")[0]?.textContent,t=a[l].getElementsByTagName("Title")[0]?.textContent,s=[],r=a[l].getElementsByTagName("Style");for(let a=0;a<r.length;a++){let e=r[a].getElementsByTagName("Name")[0]?.textContent,t=r[a].getElementsByTagName("Title")[0]?.textContent;s.push({name:e,title:t})}e&&n.push({name:e,title:t,styles:s})}this.layers=n,this.selectedLayer=this.layers[0].name,this.updateStyles()}))},updateStyles(){let e=this.layers.find((e=>e.name===this.selectedLayer));this.styles=e?e.styles:[],this.selectedStyle=this.styles.length>0?this.styles[0].name:"",this.emitLayerChange()},emitLayerChange(){this.$emit("layer-change",this.selectedLayer,this.selectedStyle)}}},k=(0,m.A)(b,[["render",w],["__scopeId","data-v-ff39e0e6"]]),C=k,E={key:0,class:"legend"},S=["src"];function x(e,t,s,a,l,r){return s.legendUrl?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("img",{src:s.legendUrl,alt:"Légende WMS"},null,8,S)])):(0,n.Q3)("",!0)}const B={props:["legendUrl"]},O=(0,m.A)(B,[["render",x],["__scopeId","data-v-71bf9983"]]),U=O,V={class:"panel-content"};function I(e,t,s,a,l,r){const o=(0,n.g2)("p1");return(0,n.uX)(),(0,n.CE)(n.FK,null,[t[12]||(t[12]=(0,n.Lk)("head",null,[(0,n.Lk)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap",rel:"stylesheet"})],-1)),(0,n.Lk)("div",{class:(0,g.C4)(["side-panel",{open:l.isOpen}])},[(0,n.Lk)("div",{class:"toggle-tab",onClick:t[0]||(t[0]=(...e)=>r.togglePanel&&r.togglePanel(...e))},t[1]||(t[1]=[(0,n.Lk)("span",null,"Informations",-1)])),(0,n.Lk)("div",V,[t[3]||(t[3]=(0,n.Lk)("h3",null,"Informations",-1)),t[4]||(t[4]=(0,n.Lk)("p",null,"Cette carte interactive présente les résultats d'un travail d'images satellites et de données de BD Forêt de l'IGN.",-1)),t[5]||(t[5]=(0,n.Lk)("p",null,"L'objectif était de se baser sur les classes d'arbres présentes dans les données de BD Forêt, fournies sous forme de polygones, pour classer chaque pixel de forêt des images Sentinel-2",-1)),t[6]||(t[6]=(0,n.Lk)("p",null,"Pour ce faire, nous avons extrait les pixels uniquement sur ces zones de forêt, puis nous avons calculé le NDVI avec les bandes S2 appropriées.",-1)),t[7]||(t[7]=(0,n.Lk)("p",null,"Vous pouvez accéder à la visualisation du NDVI via le sélecteur à gauche.",-1)),t[8]||(t[8]=(0,n.Lk)("p",null,"Ensuite, avec le NDVI et les classes de forêt, nous avons entrainé un modèle pour lui permettre d'apprendre à reconnaître la classe d'arbre d'un pixel, selon les données disponibles.",-1)),t[9]||(t[9]=(0,n.Lk)("p",null,"Vous pouvez visualiser le résultat de cette classification via le sélecteur.",-1)),t[10]||(t[10]=(0,n.Lk)("p",null,"Vous pouvez également changer le rendu des couleurs si vous souhaitez un peu de changement dans votre vie.",-1)),t[11]||(t[11]=(0,n.Lk)("p",null,"Ce travail sur les images Sentinel-2 a été réalisé en trinôme avec Joséphine Chotard et Audrey Barbiero.",-1)),(0,n.bF)(o,null,{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("Carte interractive réalisée dans le cadre de l'UE 902_1 : webmapping. Doris Ballot, M2 SIGMA 2024-2025")]))),_:1})])],2)],64)}const _={data(){return{isOpen:!1}},methods:{togglePanel(){this.isOpen=!this.isOpen}}},M=(0,m.A)(_,[["render",I],["__scopeId","data-v-6cb172cc"]]),T=M,F={components:{MapView:y,LayerSelector:C,Legend:U,Info:T},data(){return{legendUrl:""}},methods:{updateMapLayer(e,t){this.$refs.mapView&&"function"===typeof this.$refs.mapView.updateLayer?this.$refs.mapView.updateLayer(e,t):console.error("Erreur : updateLayer n'est pas défini dans MapView.vue"),this.legendUrl=`https://www.geotests.net/geoserver/ballot/wms?request=GetLegendGraphic&version=1.1.1&format=image/png&layer=${e}&style=${t}`},preventScroll(e){e.preventDefault()}},mounted(){document.body.style.margin="0",document.body.style.padding="0",document.documentElement.style.margin="0",document.documentElement.style.padding="0",document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden","0px"!==window.getComputedStyle(document.body).margin&&(document.body.style.margin="0 !important")},beforeUnmount(){window.removeEventListener("wheel",this.preventScroll),window.removeEventListener("touchmove",this.preventScroll)}},N=(0,m.A)(F,[["render",r],["__scopeId","data-v-61e34eee"]]),X=N;(0,a.Ef)(X).mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,s),l.exports}s.m=e,(()=>{var e=[];s.O=(t,a,n,l)=>{if(!a){var r=1/0;for(p=0;p<e.length;p++){for(var[a,n,l]=e[p],o=!0,i=0;i<a.length;i++)(!1&l||r>=l)&&Object.keys(s.O).every((e=>s.O[e](a[i])))?a.splice(i--,1):(o=!1,l<r&&(r=l));if(o){e.splice(p--,1);var d=n();void 0!==d&&(t=d)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[a,n,l]}})(),(()=>{s.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return s.d(t,{a:t}),t}})(),(()=>{s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var n,l,[r,o,i]=a,d=0;if(r.some((t=>0!==e[t]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(i)var p=i(s)}for(t&&t(a);d<r.length;d++)l=r[d],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(p)},a=self["webpackChunkwebmapping"]=self["webpackChunkwebmapping"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=s.O(void 0,[504],(()=>s(965)));a=s.O(a)})();
//# sourceMappingURL=app.082db6bb.js.map