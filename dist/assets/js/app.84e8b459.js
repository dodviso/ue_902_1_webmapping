(()=>{"use strict";var e={228:(e,t,s)=>{var n=s(751),a=s(641);const l={class:"app-container"};function r(e,t,s,n,r,o){const i=(0,a.g2)("MapView"),u=(0,a.g2)("LayerSelector"),p=(0,a.g2)("Legend"),d=(0,a.g2)("Info");return(0,a.uX)(),(0,a.CE)(a.FK,null,[t[1]||(t[1]=(0,a.Lk)("head",null,[(0,a.Lk)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap",rel:"stylesheet"})],-1)),(0,a.Lk)("div",l,[t[0]||(t[0]=(0,a.Lk)("h1",{class:"map-title"},"Essences d'arbres en Haute-Garonne",-1)),(0,a.bF)(i,{ref:"mapView"},null,512),(0,a.bF)(u,{onLayerChange:o.updateMapLayer},null,8,["onLayerChange"]),(0,a.bF)(p,{legendUrl:r.legendUrl},null,8,["legendUrl"]),(0,a.bF)(d)])],64)}const o={class:"map-container"};function i(e,t,s,n,l,r){return(0,a.uX)(),(0,a.CE)("div",o,t[0]||(t[0]=[(0,a.Lk)("div",{id:"map"},null,-1)]))}var u=s(481),p=s.n(u);const d={data(){return{map:null,wmsLayer:null,wmsUrl:"https://www.geotests.net/geoserver/ballot/wms",selectedLayer:"",basemaps:{osm:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",name:"OpenStreetMap"},satellite:{url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",name:"Satellite"},terrain:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",name:"Terrain"}},layersControl:null}},mounted(){(0,a.dY)((()=>{this.initMap()}))},methods:{initMap(){this.map=p().map("map").setView([43.6,1.42],10);const e=p().tileLayer(this.basemaps.osm.url,{attribution:"&copy; OpenStreetMap contributors"}).addTo(this.map),t=p().tileLayer(this.basemaps.satellite.url,{attribution:"&copy; Google"}),s=p().tileLayer(this.basemaps.terrain.url,{attribution:"&copy; OpenTopoMap contributors"});this.map.attributionControl.addAttribution("Données IGN 2016, Sentinel-2 2022"),this.layersControl=p().control.layers({[this.basemaps.osm.name]:e,[this.basemaps.satellite.name]:t,[this.basemaps.terrain.name]:s},{},{collapsed:!0}).addTo(this.map)},updateLayer(e,t){this.selectedLayer=e,this.wmsLayer&&this.map.removeLayer(this.wmsLayer),this.wmsLayer=p().tileLayer.wms(this.wmsUrl,{layers:this.selectedLayer,styles:t,format:"image/png",transparent:!0,version:"1.1.1"}).addTo(this.map)}}};var m=s(262);const c=(0,m.A)(d,[["render",i],["__scopeId","data-v-c5db753c"]]),h=c;var y=s(33);const g={class:"menu"},v=["value"],f=["value"];function L(e,t,s,l,r,o){return(0,a.uX)(),(0,a.CE)("div",g,[t[4]||(t[4]=(0,a.Lk)("h3",null,"Choisir une couche",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedLayer=e),onChange:t[1]||(t[1]=(...e)=>o.updateStyles&&o.updateStyles(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.layers,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.name,value:e.name},(0,y.v_)(e.title),9,v)))),128))],544),[[n.u1,r.selectedLayer]]),t[5]||(t[5]=(0,a.Lk)("h3",null,"Choisir un style",-1)),r.styles.length>0?(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=e=>r.selectedStyle=e),onChange:t[3]||(t[3]=(...e)=>o.emitLayerChange&&o.emitLayerChange(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.styles,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.name,value:e.name},(0,y.v_)(e.title),9,f)))),128))],544)),[[n.u1,r.selectedStyle]]):(0,a.Q3)("",!0)])}const b={data(){return{selectedLayer:"",selectedStyle:"",layers:[],styles:[],wmsUrl:"https://www.geotests.net/geoserver/ballot/wms"}},mounted(){this.fetchCapabilities()},methods:{fetchCapabilities(){fetch(`${this.wmsUrl}?service=WMS&request=GetCapabilities&version=1.1.1`).then((e=>e.text())).then((e=>{const t=new DOMParser,s=t.parseFromString(e,"text/xml"),n=s.getElementsByTagName("Layer");let a=[];for(let l=1;l<n.length;l++){let e=n[l].getElementsByTagName("Name")[0]?.textContent,t=n[l].getElementsByTagName("Title")[0]?.textContent,s=[],r=n[l].getElementsByTagName("Style");for(let n=0;n<r.length;n++){let e=r[n].getElementsByTagName("Name")[0]?.textContent,t=r[n].getElementsByTagName("Title")[0]?.textContent;s.push({name:e,title:t})}e&&a.push({name:e,title:t,styles:s})}this.layers=a,this.selectedLayer=this.layers[0].name,this.updateStyles()}))},updateStyles(){let e=this.layers.find((e=>e.name===this.selectedLayer));this.styles=e?e.styles:[],this.selectedStyle=this.styles.length>0?this.styles[0].name:"",this.emitLayerChange()},emitLayerChange(){this.$emit("layer-change",this.selectedLayer,this.selectedStyle)}}},w=(0,m.A)(b,[["render",L],["__scopeId","data-v-ff39e0e6"]]),C=w,k={key:0,class:"legend"},E=["src"];function S(e,t,s,n,l,r){return s.legendUrl?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("img",{src:s.legendUrl,alt:"Légende WMS"},null,8,E)])):(0,a.Q3)("",!0)}const x={props:["legendUrl"]},O=(0,m.A)(x,[["render",S],["__scopeId","data-v-71bf9983"]]),I=O,M={class:"panel-content"};function U(e,t,s,n,l,r){const o=(0,a.g2)("p1");return(0,a.uX)(),(0,a.CE)(a.FK,null,[t[12]||(t[12]=(0,a.Lk)("head",null,[(0,a.Lk)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap",rel:"stylesheet"})],-1)),(0,a.Lk)("div",{class:(0,y.C4)(["side-panel",{open:l.isOpen}])},[(0,a.Lk)("div",{class:"toggle-tab",onClick:t[0]||(t[0]=(...e)=>r.togglePanel&&r.togglePanel(...e))},t[1]||(t[1]=[(0,a.Lk)("span",null,"Informations",-1)])),(0,a.Lk)("div",M,[t[3]||(t[3]=(0,a.Lk)("h3",null,"Informations",-1)),t[4]||(t[4]=(0,a.Lk)("p",null,"Cette carte interactive présente les résultats d'un travail d'images satellites et de données de BD Forêt de l'IGN.",-1)),t[5]||(t[5]=(0,a.Lk)("p",null,"L'objectif était de se baser sur les classes d'arbres présentes dans les données de BD Forêt, fournies sous forme de polygones, pour classer chaque pixel de forêt des images Sentinel-2",-1)),t[6]||(t[6]=(0,a.Lk)("p",null,"Pour ce faire, nous avons extrait les pixels uniquement sur ces zones de forêt, puis nous avons calculé le NDVI avec les bandes S2 appropriées.",-1)),t[7]||(t[7]=(0,a.Lk)("p",null,"Vous pouvez accéder à la visualisation du NDVI via le sélecteur à gauche.",-1)),t[8]||(t[8]=(0,a.Lk)("p",null,"Ensuite, avec le NDVI et les classes de forêt, nous avons entrainé un modèle pour lui permettre d'apprendre à reconnaître la classe d'arbre d'un pixel, selon les données disponibles.",-1)),t[9]||(t[9]=(0,a.Lk)("p",null,"Vous pouvez visualiser le résultat de cette classification via le sélecteur.",-1)),t[10]||(t[10]=(0,a.Lk)("p",null,"Vous pouvez également changer le rendu des couleurs si vous souhaitez un peu de changement dans votre vie.",-1)),t[11]||(t[11]=(0,a.Lk)("p",null,"Ce travail sur les images Sentinel-2 a été réalisé en trinôme avec Joséphine Chotard et Audrey Barbiero.",-1)),(0,a.bF)(o,null,{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("Carte interractive réalisée dans le cadre de l'UE 902_1 : webmapping. Doris Ballot, M2 SIGMA 2024-2025")]))),_:1})])],2)],64)}const V={data(){return{isOpen:!1}},methods:{togglePanel(){this.isOpen=!this.isOpen}}},_=(0,m.A)(V,[["render",U],["__scopeId","data-v-f74e11e0"]]),T=_,F={components:{MapView:h,LayerSelector:C,Legend:I,Info:T},data(){return{legendUrl:""}},methods:{updateMapLayer(e,t){this.$refs.mapView&&"function"===typeof this.$refs.mapView.updateLayer?this.$refs.mapView.updateLayer(e,t):console.error("Erreur : updateLayer n'est pas défini dans MapView.vue"),this.legendUrl=`https://www.geotests.net/geoserver/ballot/wms?request=GetLegendGraphic&version=1.1.1&format=image/png&layer=${e}&style=${t}`},preventScroll(e){e.preventDefault()}},mounted(){document.body.style.margin="0",document.body.style.padding="0",document.documentElement.style.margin="0",document.documentElement.style.padding="0",document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden","0px"!==window.getComputedStyle(document.body).margin&&(document.body.style.margin="0 !important")},beforeUnmount(){window.removeEventListener("wheel",this.preventScroll),window.removeEventListener("touchmove",this.preventScroll)}},N=(0,m.A)(F,[["render",r],["__scopeId","data-v-61e34eee"]]),B=N;(0,n.Ef)(B).mount("#app")}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,s),l.exports}s.m=e,(()=>{var e=[];s.O=(t,n,a,l)=>{if(!n){var r=1/0;for(p=0;p<e.length;p++){for(var[n,a,l]=e[p],o=!0,i=0;i<n.length;i++)(!1&l||r>=l)&&Object.keys(s.O).every((e=>s.O[e](n[i])))?n.splice(i--,1):(o=!1,l<r&&(r=l));if(o){e.splice(p--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[n,a,l]}})(),(()=>{s.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return s.d(t,{a:t}),t}})(),(()=>{s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var a,l,[r,o,i]=n,u=0;if(r.some((t=>0!==e[t]))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(i)var p=i(s)}for(t&&t(n);u<r.length;u++)l=r[u],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(p)},n=self["webpackChunkwebmapping"]=self["webpackChunkwebmapping"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=s.O(void 0,[504],(()=>s(228)));n=s.O(n)})();
//# sourceMappingURL=app.84e8b459.js.map